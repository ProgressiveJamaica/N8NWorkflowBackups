{
  "createdAt": "2025-08-13T21:53:08.988Z",
  "updatedAt": "2025-12-19T18:10:04.479Z",
  "id": "rdvNCzYT6AVYVUH5",
  "name": "Zabbix test",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "authToken",
              "value": "={{ $json.result }}"
            }
          ]
        },
        "options": {}
      },
      "id": "e0404127-1f29-4cbd-b458-8d5be2774ed9",
      "name": "Extract Token",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [
        -896,
        -768
      ]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.0.22/api_jsonrpc.php",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"user.login\",\n  \"params\": {\n    \"username\": \"Admin\",\n    \"password\": \"zabbix\"\n  },\n  \"id\": 1\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -1088,
        -768
      ],
      "id": "e078ad3a-eba0-4c80-888e-c5dc9e0338cf",
      "name": "Zabbix Login"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "5YkWYGJPcAASgp1z",
          "mode": "list",
          "cachedResultUrl": "/workflow/5YkWYGJPcAASgp1z",
          "cachedResultName": "Zabbix Phone Line Status"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": false
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -672,
        -1056
      ],
      "name": "Call Zabbix push and timestamp test",
      "id": "67ba3c9f-5f20-4a4f-9023-41231e6c6e3e"
    },
    {
      "parameters": {
        "jsCode": "// Get all rows from the Google Sheet\nconst sheetRows = $items(\"Get Rows (Zabbix Problem Sheet)\") || [];\n\n// Build a quick lookup of eventid -> sheet row object\nconst sheetMap = {};\nfor (const r of sheetRows) {\n  const evt = (r.json[\"EventID\"] || r.json[\"Zabbix Event ID\"] || \"\").toString();\n  if (evt) sheetMap[evt] = r.json;\n}\n\n// For each incoming problem (from Braeton Problems set node)\nreturn items.map(item => {\n  const p = item.json;\n  const eventid = (p.EventID || p.eventid || \"\").toString();\n\n  // Check if this event is already in the sheet\n  const sheetEntry = sheetMap[eventid];\n\n  // Determine if it needs a ticket\n  let needsTicket = true;\n  let existingTicketId = null;\n\n  if (sheetEntry) {\n    const ticketId = (sheetEntry[\"TicketID\"] || sheetEntry[\"SysAid Ticket ID\"] || \"\").trim();\n    if (ticketId) {\n      // Already has a ticket ID\n      needsTicket = false;\n      existingTicketId = ticketId;\n    }\n  }\n\n  return {\n    json: {\n      ...p,\n      needsTicket,\n      existingTicketId,\n      sheetRow: sheetEntry || null\n    }\n  };\n});\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        960,
        -48
      ],
      "id": "3475ed92-95b6-4263-b7bd-13126cfda529",
      "name": "CheckExistingTicket",
      "executeOnce": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "b72de1fa-2d07-41c2-9a5f-441511ed1ca0",
              "leftValue": "null",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1168,
        -48
      ],
      "id": "dcf7bfb5-33b1-4405-815b-bc09af9140ee",
      "name": "If"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://pgam.sysaidit.com/api/v1/login",
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "application/JSON",
        "body": "{   \"user_name\": \"Ratkinson\",   \"password\": \"Evert0n@tkins1234\" }",
        "options": {
          "response": {
            "response": {
              "fullResponse": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1536,
        -64
      ],
      "id": "cfa38dde-bc6c-476e-82b6-062c25d178fc",
      "name": "Login credentials",
      "retryOnFail": true,
      "executeOnce": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "2a3416bc-2cdf-405b-9fe1-59c4e75cc779",
              "name": "sessionID",
              "value": "={{ $json.headers[\"set-cookie\"] }}",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1744,
        -64
      ],
      "id": "b22c2587-7533-4158-859c-bb196eb1e56a",
      "name": "SessionID"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://pgam.sysaidit.com/api/v1/sr",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Cookie",
              "value": "={{ $json.sessionID }}"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"info\": [\n    {\n      \"key\": \"title\",\n      \"value\": \"Windows: High memory utilization\"\n    },\n    {\n      \"key\": \"description\",\n      \"value\": \"Detected issue on host <b>WS - 128wkn12</b>.<br>Severity: 3<br><a href='http://192.168.0.22/zabbix.php?show=1&name=&acknowledgement_status=0&inventory%5B0%5D%5Bfield%5D=type&inventory%5B0%5D%5Bvalue%5D=&evaltype=0&tags%5B0%5D%5Btag%5D=&tags%5B0%5D%5Boperator%5D=0&tags%5B0%5D%5Bvalue%5D=&show_tags=3&tag_name_format=0&tag_priority=&show_opdata=0&show_timeline=1&filter_name=&filter_show_counter=0&filter_custom_time=0&sort=clock&sortorder=DESC&age_state=0&show_symptoms=0&show_suppressed=0&acknowledged_by_me=0&compact_view=0&details=0&highlight_row=0&action=problem.view&triggerids%5B%5D=78522'>View Zabbix Problem</a>\"\n    },\n    {\n      \"key\": \"status\",\n      \"value\": \"1\"\n    },\n    {\n      \"key\": \"urgency\",\n      \"value\": \"3\"\n    },\n    {\n      \"key\": \"impact\",\n      \"value\": \"2\"\n    },\n    {\n      \"key\": \"priority\",\n      \"value\": \"3\"\n    },\n    {\n      \"key\": \"source\",\n      \"value\": \"7\"\n    },\n    {\n      \"key\": \"request_user\",\n      \"value\": \"\"\n    },\n    {\n      \"key\": \"sub_type\",\n      \"value\": \"6\"\n    }\n  ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1952,
        -64
      ],
      "id": "5e62d9ce-ca66-42c6-b8d0-4ab35b07bb12",
      "name": "Create Sysaid Ticket",
      "retryOnFail": true,
      "executeOnce": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.0.22/api_jsonrpc.php",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "zabbixApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"event.acknowledge\",\n  \"params\": {\n    \"eventids\": [\"10833842\"],\n    \"action\": \"6\",\n    \"message\": \"SysAid ticket created: <a href=\\\"https://pgam.sysaidit.com/spaces/ticket?id={{ $json.id }}\\\" target=\\\"_blank\\\">View Ticket SR#{{ $json.id }}</a>\"\n  },\n  \"id\": 6\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2496,
        -64
      ],
      "id": "b678c909-bdc0-4708-b801-94a860412e2e",
      "name": "Zabbix Update",
      "credentials": {
        "zabbixApi": {
          "id": "yJ0hjegcWJuG6BZR",
          "name": "Zabbix account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [
            "EventID"
          ],
          "schema": [
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "HostID",
              "displayName": "HostID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Host",
              "displayName": "Host",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Host Name",
              "displayName": "Host Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Severity",
              "displayName": "Severity",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        2720,
        -64
      ],
      "id": "65f18187-d821-4161-87fd-229910fa4e0b",
      "name": "Update row in sheet",
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "startIndex": "={{ $json.rowIndex }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        1648,
        -432
      ],
      "id": "79267c53-d861-445d-8eae-beac39aab1fd",
      "name": "Delete rows or columns from sheet",
      "alwaysOutputData": false,
      "executeOnce": false,
      "retryOnFail": true,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "rowIndex",
              "order": "descending"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        1456,
        -432
      ],
      "id": "de5c6d14-4e36-4b84-a895-d7f54b39205b",
      "name": "Sort"
    },
    {
      "parameters": {
        "jsCode": "// Get all HostIDs that currently have active problems in Zabbix (status = \"PROBLEM\")\nconst apiHostIds = new Set(\n  $items(\"API Zabbix Problems\")\n    .filter(item => item.json.Status === \"PROBLEM\")\n    .map(item => String(item.json.HostID).trim())\n);\n\n// Get rows from sheet\nconst sheetRows = $items(\"Zabbix Problems\");\n\n// Find rows that are either missing from API OR marked as resolved\nconst closedProblems = sheetRows.filter(item => {\n  const sheetHostId = String(item.json.HostID).trim();\n  const status = item.json.Status?.trim();\n\n  // True if not found in current API or marked as resolved\n  return !apiHostIds.has(sheetHostId) || status === \"RESOLVED\";\n});\n\n// Output rows to be removed or updated\nreturn closedProblems.map(item => ({\n  json: {\n    HostID: item.json.HostID,\n    rowIndex: item.json.row_number,\n    Status: item.json.Status,\n    Host: item.json.Host,\n    HostName: item.json[\"Host Name\"],\n    Desc: item.json.Description\n  }\n}));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        976,
        -416
      ],
      "id": "b622e7a6-c25a-44ea-8172-f6ba30bdaf35",
      "name": "Find Resolved Problems",
      "retryOnFail": true,
      "executeOnce": true,
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "4eb237bf-cdae-4c36-92e1-6d7237b0bbf8",
              "leftValue": "={{ $json.HostID }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1200,
        -416
      ],
      "id": "352fb309-adba-4d5d-aef6-3aab655503c2",
      "name": "If1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ccca319a-500a-4c05-8e62-91b1cfd1adf2",
              "name": "id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "5a49f95c-1208-4730-ac5f-db69d627cb7e",
              "name": "EventID",
              "value": "10833842",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2256,
        -64
      ],
      "id": "fa587c08-3b7d-44fe-8ce8-68791f71bdbc",
      "name": "ID and EventID"
    },
    {
      "parameters": {
        "content": "## Zabbix Login\n\nUsing zabbix credentials to login and get the token from the admin.",
        "height": 240,
        "width": 560
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1328,
        -864
      ],
      "id": "ac1d98c4-79c8-4b1b-91f6-0ec859ea97a7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Zabbix Phone Line\n\nWorkflow has more information.",
        "height": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -752,
        -1152
      ],
      "id": "ae3cdbaf-fb12-4276-bddb-a7606f67dce5",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Zabbix Problems\n\nAll zabbix problems are extracted using the problem.get parameters. This includes, objectid, severity, clock (time when the problem occured) and description of the problem. Then a split out node is used to get all the information form the result array from the problem.get. Then a set node is used to clean and transform the data.\n\nAn aggregate node is used before the trigger.get node to put the triggerid's in an array so as to not overload the HTTP node with alot of data and prevent the node from failing.\n\nThen we get the host name from the trigger.get parameter using the array from the aggregate node for the host's respective id. Then another split out node is used to get the data from both the result and host arrays. Then we use a merge node to match triggerid's to there respective hosts. Then a set node to transform the data.",
        "height": 608,
        "width": 1056
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -464,
        -1024
      ],
      "id": "6c1266f7-fba9-4e33-a679-553eb4e8d3d3",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## Merge, Compare and Delete\n\nMerge node combines both the Zabbix problems from the API and the problems in the sheet. \n\nCode node does a comparison to see which problems that are in the sheet is not returned from the API. If not, it gets marked for deletion as it's considered  resolved.\n\nSort node is used to delete rows in descending order.",
        "height": 320,
        "width": 1152
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        704,
        -592
      ],
      "id": "2364c571-3270-4cf5-9c56-ff4d0a76510f",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## Append and Read \nInfo is then put into the respective store sheet. Then we get the rows from the sheet which returns a row number and set using a set node. This is needed for deletion later.",
        "height": 352,
        "width": 1376
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -784,
        -384
      ],
      "id": "69eae912-0376-4526-a320-7865db5c0081",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Check Problems\n\nWe then read the problems in the sheet to see if each problem has a ticket. If not, it get's sent to Sysaid's API to create the ticket for that problem.",
        "height": 288,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        704,
        -176
      ],
      "id": "5f8a78e2-ed11-4ad1-96b2-866ca34a7c19",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Login to Sysaid\n\nLogin to sysaid using user credentials as proof.\n\nUse the POST to create a sysaid ticket for that problem.",
        "height": 288,
        "width": 624
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1488,
        -192
      ],
      "id": "de2db9d4-0243-424a-8378-5747cf8229ef",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "## Send Zabbix an update of the problem\n\nA set node is used to get the ticket ID created from Sysaid and the event ID of the problem.\n\nWe used a POST node to update/acknowledge the problem in zabbix using the event.acknowledge param. \n\nWe then update the problem in the sheet using the event ID to match and add the ticket number that problem.",
        "height": 368,
        "width": 672
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2224,
        -272
      ],
      "id": "afa1f038-d635-43f7-9edf-ef3ee03a31e1",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "fXOynQEZrkWxv3o1",
          "mode": "list",
          "cachedResultUrl": "/workflow/fXOynQEZrkWxv3o1",
          "cachedResultName": "Creating Zabbix Hosts and Items"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -672,
        -672
      ],
      "name": "Call Creating Zabbix Hosts and Items",
      "id": "dbd38182-8bd3-4c0f-8240-f3d343b4b965"
    },
    {
      "parameters": {
        "url": "http://192.168.0.22/api_jsonrpc.php",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "zabbixApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"problem.get\",\n  \"params\": {\n    \"output\": [\"eventid\", \"objectid\", \"name\", \"severity\", \"clock\", \"r_eventid\"],\n    \"sortfield\": \"eventid\",\n    \"sortorder\": \"DESC\",\n    \"recent\": true\n  },\n  \"id\": 4\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -416,
        -768
      ],
      "id": "39c806bf-9887-4e25-b678-a734d848aab6",
      "name": "Get Zabbix problems",
      "credentials": {
        "zabbixApi": {
          "id": "yJ0hjegcWJuG6BZR",
          "name": "Zabbix account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.0.22/api_jsonrpc.php",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "zabbixApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"trigger.get\",\n  \"params\": {\n    \"output\": [\"triggerid\", \"description\", \"priority\"],\n    \"triggerids\": [{{ $json.triggerid }}],\n    \"selectHosts\": [\"hostid\", \"host\", \"name\"]\n  },\n  \"id\": 5\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -240,
        -560
      ],
      "id": "0d4a06ac-cbf3-4095-a29d-62d36139101d",
      "name": "Zabbix Trigger Problems",
      "executeOnce": false,
      "retryOnFail": true,
      "credentials": {
        "zabbixApi": {
          "id": "yJ0hjegcWJuG6BZR",
          "name": "Zabbix account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Time": "={{ $json.Time }}",
            "HostID": "={{ $json.HostID }}",
            "Host": "={{ $json.Host }}",
            "Host Name": "={{ $json[\"Host Name\"] }}",
            "Severity": "={{ $json.Severity }}",
            "Description": "={{ $json.Description }}",
            "Status": "={{ $json.Status }}",
            "EventID": "={{ $json.EventID }}"
          },
          "matchingColumns": [
            "Description"
          ],
          "schema": [
            {
              "id": "Time",
              "displayName": "Time",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "HostID",
              "displayName": "HostID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Host",
              "displayName": "Host",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Host Name",
              "displayName": "Host Name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Severity",
              "displayName": "Severity",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "EventID",
              "displayName": "EventID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -736,
        -288
      ],
      "id": "3ed08c6d-0d6c-48cf-b220-27860ccd9f6b",
      "name": "Zabbix Problems Sheet",
      "retryOnFail": true,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "combineFilters": "OR",
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -560,
        -288
      ],
      "id": "b02e83cb-ff82-4f70-9973-e616136cbff1",
      "name": "Get Zabbix Problems",
      "executeOnce": true,
      "alwaysOutputData": true,
      "retryOnFail": true,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8e7cb0ef-103e-41b7-80cd-a54c04411b36",
              "name": "row_number",
              "value": "={{ $json.row_number }}",
              "type": "string"
            },
            {
              "id": "d04899ee-a706-486b-b54b-2fcbca942c5a",
              "name": "HostID",
              "value": "={{ $json.HostID }}",
              "type": "number"
            },
            {
              "id": "cdf72c5a-90e5-4b92-aab5-669fd037aa67",
              "name": "Host Name",
              "value": "={{ $json[\"Host Name\"] }}",
              "type": "string"
            },
            {
              "id": "77bb5045-cb46-4fae-854d-42b501fa9caa",
              "name": "Status",
              "value": "={{ $json.Status }}",
              "type": "string"
            },
            {
              "id": "7170cd7a-d2e5-4ed8-8f85-2aab1240826c",
              "name": "Description",
              "value": "={{ $json.Description }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        432,
        -256
      ],
      "id": "5fb49e6c-1f43-4606-9e6d-272e71bf1021",
      "name": "Zabbix Problems"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        768,
        -416
      ],
      "id": "0eacc526-d1be-41bd-b282-a91f3c5ac26f",
      "name": "Merge API & Sheet"
    },
    {
      "parameters": {
        "fieldToSplitOut": "result",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -240,
        -768
      ],
      "id": "6c04f115-be4e-46ea-a358-8df5e51b532b",
      "name": "Split Out Result Array"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "a42eb48e-49fa-4aba-bcdf-275137b80ec7",
              "name": "Time",
              "value": "={{ new Date($json[\"clock\"] * 1000).toISOString().replace('T', ' ').substring(0, 19).trim() }}",
              "type": "string"
            },
            {
              "id": "8a222147-4ba0-4af0-8cca-ee3fc51dc455",
              "name": "triggerid",
              "value": "={{ $json.objectid }}",
              "type": "string"
            },
            {
              "id": "ff756d67-e706-41c8-8ad6-3c44b2c6ff32",
              "name": "Status",
              "value": "={{ $json[\"r_eventid\"] === \"0\" || !$json[\"r_eventid\"] ? \"PROBLEM\" : \"RESOLVED\" }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "include": "except",
        "excludeFields": "eventid, clock, r_eventid, objectid",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -64,
        -768
      ],
      "id": "8205db07-79c4-4526-8346-8441a7adadee",
      "name": "Set Trigger ID's"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "triggerid"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -416,
        -560
      ],
      "id": "caded62f-ded7-4a8c-a302-4e4ad311c333",
      "name": "Trigger ID Array"
    },
    {
      "parameters": {
        "fieldToSplitOut": "result, result[0].hosts",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -64,
        -560
      ],
      "id": "c069b3e7-dc2f-452c-9439-f2ece7c98db6",
      "name": "Split Out Result and Hosts"
    },
    {
      "parameters": {
        "mode": "combine",
        "advanced": true,
        "mergeByFields": {
          "values": [
            {
              "field1": "triggerid",
              "field2": "result.triggerid"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        192,
        -672
      ],
      "id": "372f5fde-82d4-4d17-9490-1e158dd8b92a",
      "name": "Merge TriggerID"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "847cd878-4b87-491e-bf5e-7c83ab9693cc",
              "name": "Time",
              "value": "={{ $json.Time }}",
              "type": "string"
            },
            {
              "id": "61dec4c1-c9e9-4efd-a7b8-c09c41624cfb",
              "name": "HostID",
              "value": "={{ $json.result.hosts[0].hostid }}",
              "type": "string"
            },
            {
              "id": "2d380f93-2503-4489-b131-a961fe374e17",
              "name": "Host",
              "value": "={{ $json.result.hosts[0].host }}",
              "type": "string"
            },
            {
              "id": "cd85b0ce-1d42-41cf-9d70-12fc1f996f74",
              "name": "Host Name",
              "value": "={{ $json.result.hosts[0].name }}",
              "type": "string"
            },
            {
              "id": "c5159c8c-25e3-443f-a686-c9d8c50597f5",
              "name": "Severity",
              "value": "={{ $json.severity }}",
              "type": "string"
            },
            {
              "id": "c491e678-a274-440c-8856-7b96165c2488",
              "name": "Description",
              "value": "={{ $json.name }}",
              "type": "string"
            },
            {
              "id": "ac9db0a7-d6a4-49fc-93f6-a79c26149e6e",
              "name": "Status",
              "value": "={{ $json.Status }}",
              "type": "string"
            },
            {
              "id": "9de7af85-ca7a-40f4-9dd3-12df43933a67",
              "name": "EventID",
              "value": "={{ $('Split Out Result Array').item.json.eventid }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        432,
        -576
      ],
      "id": "a6e5bcb3-841c-460e-bca5-3a65e99cedcf",
      "name": "API Zabbix Problems"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        752,
        -48
      ],
      "id": "4401b35c-0fc1-4a28-82aa-f47dcbfc76dd",
      "name": "Get Rows (Zabbix Problem Sheet)",
      "executeOnce": true,
      "alwaysOutputData": false,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1280,
        -768
      ],
      "id": "4ec5dd4b-5db5-47a9-bad4-aee5a808d9e9",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "jsCode": "const seen = new Set();\nconst duplicates = [];\n\nfor (const item of items) {\n  const hostId = item.json.HostID;\n  const desc = item.json.Description;\n\n  // If either field missing, skip (no meaningful comparison)\n  if (!hostId || !desc) continue;\n\n  // Build a unique signature for this problem\n  const signature = `${hostId}::${desc}`;\n\n  // Check if the same HostID + Description was seen before\n  if (seen.has(signature)) {\n    duplicates.push({ json: item.json });\n  } else {\n    seen.add(signature);\n  }\n}\n\nreturn duplicates;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -384,
        -288
      ],
      "id": "7a0a2972-6728-49a8-b42c-94cdbc12171c",
      "name": "Detect Duplicates",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "sortFieldsUi": {
          "sortField": [
            {
              "fieldName": "row_number",
              "order": "descending"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.sort",
      "typeVersion": 1,
      "position": [
        -64,
        -304
      ],
      "id": "287f5f34-f345-43c3-b8d2-8f7d725fab8e",
      "name": "Sort1"
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "startIndex": "={{ $json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.6,
      "position": [
        128,
        -304
      ],
      "id": "10d56169-dc95-4964-badc-7093cf75e4d0",
      "name": "Delete Dupes",
      "alwaysOutputData": false,
      "executeOnce": false,
      "retryOnFail": true,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "documentId": {
          "__rl": true,
          "value": "117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0",
          "mode": "list",
          "cachedResultName": "Ticket Data",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1939728952,
          "mode": "list",
          "cachedResultName": "Zabbix Problems",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/117E9W7q0sZzQ5JM5Pt1cclrYUk-Gx_h9X3Wf7N5Xef0/edit#gid=1939728952"
        },
        "combineFilters": "OR",
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        272,
        -176
      ],
      "id": "98b6ca8c-353c-4456-b210-d19b870ab36a",
      "name": "Get Zabbix Problems1",
      "executeOnce": true,
      "alwaysOutputData": true,
      "retryOnFail": true,
      "credentials": {
        "googleApi": {
          "id": "Fr8gBQ8Q5zSOdGfU",
          "name": "Google Service Account account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "4eb237bf-cdae-4c36-92e1-6d7237b0bbf8",
              "leftValue": "={{ $json.HostID }}",
              "rightValue": "",
              "operator": {
                "type": "number",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -208,
        -192
      ],
      "id": "e48ea25b-ffb3-4485-b5b8-16b1ad2fa8c3",
      "name": "If2"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        768,
        -752
      ],
      "id": "5852a853-9c19-45d6-9e88-3d32d8e3e272",
      "name": "Limit"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://192.168.0.22/api_jsonrpc.php",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "zabbixApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"event.acknowledge\",\n  \"params\": \n  {\n    \"eventids\": \"10166575\",\n    \"action\": 4,\n    \"message\": \"{{ $json.data.text }}\"\n  },\n\"id\": 1\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1200,
        -752
      ],
      "id": "257f0173-b307-4f39-a26d-fb35c6412369",
      "name": "Zabbix Acknowledge",
      "executeOnce": false,
      "retryOnFail": true,
      "credentials": {
        "zabbixApi": {
          "id": "yJ0hjegcWJuG6BZR",
          "name": "Zabbix account"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendAndWait",
        "phoneNumberId": "883606571504084",
        "recipientPhoneNumber": "18763514207 - ronaldo",
        "message": "=See the following problem:\n{{ $json.Time }}\n{{ $json[\"Host Name\"] }}\n{{ $json.Description }}",
        "responseType": "freeText",
        "options": {}
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1.1,
      "position": [
        976,
        -752
      ],
      "id": "e37cf705-ee10-4ecc-ace5-b0b80237d85d",
      "name": "Send message and wait for response",
      "webhookId": "6e86d705-76c1-427b-b5f8-10e622da99d5",
      "credentials": {
        "whatsAppApi": {
          "id": "bP42xqNMnKqIbTr5",
          "name": "WhatsApp account"
        }
      }
    }
  ],
  "connections": {
    "Zabbix Login": {
      "main": [
        [
          {
            "node": "Extract Token",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Token": {
      "main": [
        [
          {
            "node": "Get Zabbix problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "CheckExistingTicket": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        []
      ]
    },
    "Login credentials": {
      "main": [
        [
          {
            "node": "SessionID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "SessionID": {
      "main": [
        [
          {
            "node": "Create Sysaid Ticket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Sysaid Ticket": {
      "main": [
        [
          {
            "node": "ID and EventID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zabbix Update": {
      "main": [
        [
          {
            "node": "Update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sort": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete rows or columns from sheet": {
      "main": [
        []
      ]
    },
    "Find Resolved Problems": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "Sort",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "ID and EventID": {
      "main": [
        [
          {
            "node": "Zabbix Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Zabbix problems": {
      "main": [
        [
          {
            "node": "Split Out Result Array",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zabbix Trigger Problems": {
      "main": [
        [
          {
            "node": "Split Out Result and Hosts",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zabbix Problems Sheet": {
      "main": [
        [
          {
            "node": "Get Zabbix Problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Zabbix Problems": {
      "main": [
        [
          {
            "node": "Detect Duplicates",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zabbix Problems": {
      "main": [
        [
          {
            "node": "Merge API & Sheet",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge API & Sheet": {
      "main": [
        [
          {
            "node": "Find Resolved Problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Result Array": {
      "main": [
        [
          {
            "node": "Set Trigger ID's",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Trigger ID's": {
      "main": [
        [
          {
            "node": "Merge TriggerID",
            "type": "main",
            "index": 0
          },
          {
            "node": "Trigger ID Array",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trigger ID Array": {
      "main": [
        [
          {
            "node": "Zabbix Trigger Problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out Result and Hosts": {
      "main": [
        [
          {
            "node": "Merge TriggerID",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge TriggerID": {
      "main": [
        [
          {
            "node": "API Zabbix Problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "API Zabbix Problems": {
      "main": [
        [
          {
            "node": "Zabbix Problems Sheet",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge API & Sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Rows (Zabbix Problem Sheet)": {
      "main": [
        [
          {
            "node": "CheckExistingTicket",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Zabbix Login",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Detect Duplicates": {
      "main": [
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sort1": {
      "main": [
        [
          {
            "node": "Delete Dupes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Dupes": {
      "main": [
        [
          {
            "node": "Get Zabbix Problems1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Zabbix Problems1": {
      "main": [
        [
          {
            "node": "Zabbix Problems",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "Sort1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Get Zabbix Problems1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "Send message and wait for response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send message and wait for response": {
      "main": [
        [
          {
            "node": "Zabbix Acknowledge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": {
    "node:Schedule Trigger": {
      "recurrenceRules": []
    }
  },
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "70191662-e9ee-4149-8d2a-75e574230acb",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-08-13T21:53:08.988Z",
      "updatedAt": "2025-08-13T21:53:08.988Z",
      "role": "workflow:owner",
      "workflowId": "rdvNCzYT6AVYVUH5",
      "projectId": "jYvi0vPc2f8MZoYz"
    }
  ],
  "tags": []
}